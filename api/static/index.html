<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio-to-Score Transcription</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1>Audio-to-Score Transcription</h1>
            <p>Convert audio recordings to musical notation and tablature</p>
        </header>

        <main>
            <div class="upload-section">
                <div id="drop-zone" class="drop-zone">
                    <div class="drop-zone-content">
                        <div class="icon">
                            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="17 8 12 3 7 8"></polyline>
                                <line x1="12" y1="3" x2="12" y2="15"></line>
                            </svg>
                        </div>
                        <h2>Drag & Drop Audio File</h2>
                        <p>or</p>
                        <label for="file-input" class="btn">Select File</label>
                        <input type="file" id="file-input" accept="audio/*" hidden>
                        <p class="hint">Supported formats: MP3, WAV</p>
                        
                        <!-- New file name display element -->
                        <div id="file-name-display" class="file-name-display" style="display: none;"></div>
                        
                        <!-- File selected indicator -->
                        <div id="file-selected-indicator" class="selected-indicator" style="display: none;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                                <polyline points="22 4 12 14.01 9 11.01"></polyline>
                            </svg>
                            <span>File Selected</span>
                        </div>
                    </div>
                </div>
                
                <!-- History section for previously uploaded audio files -->
                <div id="history-container" class="history-container">
                    <h3>Previously Uploaded Files</h3>
                    <div id="history-list" class="history-list">
                        <!-- History items will be added here dynamically -->
                        <p id="no-history-message" class="no-history-message">No history yet. Upload files to see them here.</p>
                    </div>
                </div>

                <div id="options-panel" class="options-panel hidden">
                    <h3>Transcription Options</h3>
                    
                    <div class="option-group">
                        <label for="instrument-select">Instrument:</label>
                        <select id="instrument-select">
                            <option value="bass" selected>Bass Guitar</option>
                            <option value="guitar">Guitar</option>
                            <option value="ukulele">Ukulele</option>
                        </select>
                    </div>
                    
                    <div class="option-group">
                        <label for="tuning-select">Tuning:</label>
                        <select id="tuning-select">
                            <option value="standard" selected>Standard (E A D G)</option>
                            <option value="drop-d">Drop D (D A D G)</option>
                            <option value="5-string">5-String (B E A D G)</option>
                        </select>
                    </div>

                    <div class="option-group">
                        <label>Advanced Options:</label>
                        <div class="checkbox-group">
                            <input type="checkbox" id="stem-separation-checkbox">
                            <label for="stem-separation-checkbox">Use stem separation (for multi-instrument recordings)</label>
                        </div>
                    </div>

                    <button id="start-transcription-btn" class="btn primary-btn">Start Transcription</button>
                </div>
            </div>

            <div id="processing-container" class="processing-container hidden">
                <div class="status-container">
                    <h3>Processing Audio</h3>
                    <div class="progress-bar">
                        <div id="progress-indicator" class="progress-indicator"></div>
                    </div>
                    <p id="status-message">Uploading file...</p>
                </div>
            </div>

            <div id="results-container" class="results-container hidden">
                <h3>Transcription Results</h3>
                
                <div class="tabs">
                    <button class="tab-btn active" data-tab="tab-tablature">Tablature</button>
                    <button class="tab-btn" data-tab="tab-standard">Standard Notation</button>
                    <button class="tab-btn" data-tab="tab-chord">Chord Chart</button>
                </div>
                
                <div class="tab-content">
                    <div id="tab-tablature" class="tab-pane active">
                        <div id="tablature-display" class="notation-display">
                            <!-- Tablature content will be rendered here -->
                        </div>
                        <div class="download-options">
                            <button id="download-pdf" class="btn">Download PDF</button>
                            <button id="download-musicxml" class="btn">Download MusicXML</button>
                        </div>
                    </div>
                    
                    <div id="tab-standard" class="tab-pane">
                        <div id="standard-notation-display" class="notation-display">
                            <!-- Standard notation content will be rendered here -->
                        </div>
                    </div>
                    
                    <div id="tab-chord" class="tab-pane">
                        <div id="chord-chart-display" class="notation-display">
                            <!-- Chord chart content will be rendered here -->
                        </div>
                    </div>
                </div>
                
                <div class="audio-player">
                    <h4>Original Audio</h4>
                    <audio id="original-audio" controls></audio>
                </div>
                
                <div class="actions-container">
                    <button id="try-again-btn" class="btn primary-btn">Try Another Audio</button>
                </div>
            </div>
        </main>

        <footer>
            <p>Â© 2025 Audio-to-Score Transcription System</p>
        </footer>
    </div>

    <!-- Modular JavaScript files - organized according to refactoring rules -->
    <script src="js/audioProcessor.js"></script>
    <script src="js/uiController.js"></script>
    <script src="js/resultRenderer.js"></script>
    <script src="js/historyManager.js"></script>
    <script src="js/tests.js"></script>
    <script src="js/demoMode.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
